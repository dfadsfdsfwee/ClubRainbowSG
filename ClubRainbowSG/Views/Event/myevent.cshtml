@page
@model ClubRainbowSG.Views.Event.myeventModel
@{
}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    @if (ViewBag.myevents != null && ((IEnumerable<dynamic>)ViewBag.myevents).Any())
    {
        <div class="main_division">
        @foreach (var evt in ViewBag.myevents)
        {
            <div class="sub_division">
            <h1>Event: @evt.pcsname</h1>
            <h1>Tickets: @evt.ticket_count</h1>
            <p>Start Date: @evt.start_date_time</p>
            <p>End Date: @evt.end_date_time</p>
            <p>Venue: @evt.location</p>
               @* <a href="@Url.Action("Qrcode", "Event")" class="btn">Scan QR Code</a>*@
                <form method="post" asp-action="MarkAttendance" asp-route-programmePCS_FK="@evt.programmePCS_FK">
                    <input type="hidden" name="ticket_count" value="@evt.ticket_count" />
                    <button type="submit" class="btn">Mark Attendance</button>
                </form>
            </div>
            <div class="modal" id="messageModal">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Message</h4>
                        </div>
                        <div class="modal-body" id="messageText">
                            <!-- Message will be injected here -->
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>

        }
    </div>
    }
    else
    {
     <div class="info-division">
            <h1>You currently haven't signed up for any events. Your events list is empty. </h1><br>
            <h1>Please register for events to start managing them here!</h1>
        </div>
    }

<script type="text/javascript">
    $(document).ready(function () {
        var message = '@TempData["Message"]';
        if (message) {
            $('#messageText').text(message);
            $('#messageModal').modal('show');
        }

        // Hide the modal when the close button is clicked
        $('.btn-danger').click(function () {
            $('#messageModal').modal('hide');
        });
    });
</script>



